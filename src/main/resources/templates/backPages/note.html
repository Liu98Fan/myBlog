<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>center</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <!-- VENDOR CSS -->
    <link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.css" th:href="@{/pageResources/assets/vendor/bootstrap/css/bootstrap.css}">
    <link rel="stylesheet" th:href="@{/pageResources/assets/vendor/font-awesome/css/font-awesome.min.css}">
    <link rel="stylesheet" th:href="@{/pageResources/assets/vendor/linearicons/style.css}">
    <link rel="stylesheet" th:href="@{/pageResources/assets/vendor/toastr/toastr.min.css}">
    <link rel="stylesheet" th:href="@{/pageResources/layui/css/layui.css}">
    <link rel="stylesheet" th:href="@{/pageResources/css/editormd.css}" />
    <!-- MAIN CSS -->
    <link rel="stylesheet" th:href="@{/pageResources/assets/css/main.css}">
    <!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
    <link rel="stylesheet" th:href="@{/pageResources/assets/css/demo.css}">
    <!-- GOOGLE FONTS -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
    <!-- ICONS -->
    <link rel="apple-touch-icon" sizes="76x76"th:href="@{/pageResources/assets/img/apple-icon.png}">
    <link rel="icon" type="image/png" sizes="96x96"th:href="@{/pageResources/assets/img/favicon.png}">
</head>
<body>
<div id="wrapper">
    <!-- 顶部 -->
    <div th:replace="commons/leftbar::topBar"></div>
    <!-- 结束 顶部 -->
    <!-- 左侧菜单 -->
    <div id="sidebar-nav" class="sidebar" th:replace="commons/leftbar::sideBar(activeUrl='note')">

    </div>
    <!-- 结束 左侧菜单 -->

    <div class="main">
        <!-- MAIN CONTENT -->
        <div class="main-content">
            <div class="container-fluid">
                <h3 class="page-title">note configure</h3>
                <div class="panel panel-headline">
                    <div class="panel-heading">
                        <h3 class="panel-title">
                            发布笔记
                        </h3>
                        <div class="right">
                            <button type="button" class="btn-toggle-collapse"><i class="lnr lnr-chevron-up"></i></button>
                        </div>
                    </div>
                    <div class="panel-body">
                        <form method="post" class="form-horizontal"
                              th:action="@{/note/saveNote}">
                            <input id="hide-id" name="id" th:value="${#strings.isEmpty(note)?'':note.id}" type="hidden">
                            <div class="form-group">
                                <label  class="col-sm-1 control-label text-left">标题</label>
                                <div class="col-sm-10">
                                    <input required="required" type="text" name="title" class="form-control" placeholder="标题"
                                           th:value="${#strings.isEmpty(note)?'':note.title}">
                                </div>
                            </div>
                            <div class="form-group">
                                <label  class="col-sm-1 control-label ">作者</label>
                                <div class="col-sm-10">
                                    <input required="required"type="text" name="author" class="form-control" placeholder="作者"
                                           th:value="${#strings.isEmpty(note)?'':note.author}">
                                </div>
                            </div>
                            <div class="form-group">
                                <label  class="col-sm-1 control-label ">分类</label>
                                <div class="col-sm-3">
                                    <select id="cselect"name = "noteclassify.id" class="form-control"
                                            onchange="selectChanged(this)">
                                        <option value="-1">自定义</option>
                                        <option th:each="classify:${clist}"
                                                th:value="${classify.id}"
                                                th:selected="${!#strings.isEmpty(note)&&classify.id==note.noteclassify.id?'selected':false}" >[[${classify.classifyname
                                            }]]</option>
                                    </select>
                                </div>
                                <div class="col-sm-4">
                                    <input id="classifyName"type="text" class="form-control"
                                           name="noteclassify.classifyname"
                                           placeholder="请输入自定义分类名" required="required">
                                </div>
                            </div>
                            <div class="form-group">
                                <label  class="col-sm-1 control-label ">内容</label>
                                <div class="col-sm-10">
                                    <div id="layout">
                                        <div id="test-editormd">
                                            <textarea style="display:none;" name="content" >[[${#strings.isEmpty
                                                (note)?'':note.content}]]</textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row text-center">
                                    <button type="submit" class="btn btn-success ">提交</button>
                                    <button type="reset" class="btn btn-danger ">重置</button>
                                </div>
                            </div>

                        </form>
                    </div>
                </div>
                <div class="panel panel-headline" id="xianshi">

                </div>
                <div class="text-center" id="changePage"></div>
            </div>
        </div>
    </div>
</div>
<!-- Javascript -->
<script th:src="@{/pageResources/assets/vendor/jquery/jquery.min.js}"></script>
<script th:src="@{/pageResources/assets/vendor/bootstrap/js/bootstrap.min.js}"></script>
<script th:src="@{/pageResources/assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js}"></script>
<script th:src="@{/pageResources/assets/vendor/toastr/toastr.min.js}"></script>
<script th:src="@{/pageResources/assets/scripts/klorofil-common.js}"></script>
<script th:src="@{/pageResources/layui/layui.js}"></script>
<script th:src="@{/pageResources/js/editormd.js}"></script>
<script type="text/javascript" th:src="@{/pageResources/js/splitPage.js}"></script>
<script>
    function selectChanged(e){
        var object = $(e);
        //alert(object.val());
        if (object.val()=="-1"){
            $("#classifyName").attr("type","text");
            $("#classifyName").attr("required","required");
            $("#classifyName").val("");
        }else{
            $("#classifyName").attr("type","hidden");
            $("#classifyName").val(object.find("option:selected").text());
            $("#classifyName").removeAttr("required");
        }
    }
    var testEditor;
    $(function() {
        testEditor = editormd("test-editormd",{
            width   : "100%",
            height  : 640,
            syncScrolling : "single",
            path    : "/pageResources/mark/",
            imageUpload : true,
            imageFormats : ["jpg", "jpeg", "gif", "png", "bmp"],
            imageUploadURL : "/tools/uploadImages",
        });
    });
    layui.use(['layedit','laypage','layer'], function(){
        var layedit = layui.layedit,
            laypage = layui.laypage,
            layer = layui.layer;
        layedit.build('layuieditor'); //建立编辑器


    });
</script>
</body>
</html>